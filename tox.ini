[tox]
envlist = {py38,py39}-{cpython,universal}

[testenv]
setenv =
  cpython: HPY_ABI=cpython
  universal: HPY_ABI=universal

passenv = PYTHONPATH

deps =
    pytest
    six
    blist
    unittest2
    pytz
    hpy==0.0.2

skip_install = true

commands =
    pip install --global-option="--hpy-abi={env:HPY_ABI}" .
    py.test tests/tests.py
